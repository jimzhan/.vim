#!/usr/bin/env sh
vim="$HOME/.vim"
repos="https://github.com/jimzhan/.vim"

info() {
    printf "\e[34m[⊙]\e[0m ${1}\n"
}

error() {
    printf "\e[31m[✘]\e[0m ${1}\n"
}

success() {
    printf "\e[32m[✔]\e[0m ${1}\n"
}

# backup/unlink existing vimrc
# ------------------------------
if [ -L $HOME/.vimrc ]; then
    unlink $HOME/.vimrc
    info "existing .vimrc unlinked"
elif [ -f $HOME/.vimrc ]; then
    mv $HOME/.vimrc $HOME/.vimrc.bak
    info ".vimrc    =>  .vimrc.bak"
fi

# backup/unlink existing gvimrc
# ------------------------------
if [ -L $HOME/.gvimrc ]; then
    unlink $HOME/.gvimrc
    info "existing .gvimrc unlinked"
elif [ -f $HOME/.gvimrc ]; then
    mv $HOME/.gvimrc $HOME/.gvimrc.bak
    info ".gvimrc   =>  .gvimrc.bak"
fi

# clone/update from remote repos
# ------------------------------
if [ ! -d $vim ]; then
    info "Setting up Vim..."
    git clone $repos $vim
    success "Vim fetched, starting up..."
else
    cd $vim && git pull -v
    success "Vim is now updated"
fi

ln -s $vim/vimrc  $HOME/.vimrc
ln -s $vim/gvimrc $HOME/.gvimrc
